const articlesData = [
    {
        title: "2026년 익스프레스 엔트리: 카테고리 기반 선발 이해하기",
        badge: "익스프레스 엔트리",
        date: "2026년 2월 24일",
        content: `
            <p>IRCC는 카테고리 기반 선발을 통해 익스프레스 엔트리 시스템을 혁신했습니다. 2026년에는 특정 경제적 목표를 달성하기 위해 다음 5가지 분야에 집중하고 있습니다:</p>
            <ul>
                <li>보건 의료 (Healthcare)</li>
                <li>STEM 분야 (과학, 기술, 공학, 수학)</li>
                <li>기술직 (Trades - 전기, 목수, 배관 등)</li>
                <li>운송 (Transport)</li>
                <li>농업 및 농식품 (Agriculture and Agri-food)</li>
            </ul>
            <p>해당 분야에서 최근 3년 이내 최소 6개월 이상의 연속된 경력이 있다면, 일반 선발 점수보다 50~100점 낮은 점수로도 영주권 초청장(ITA)을 받을 가능성이 매우 높습니다. 본인의 경력이 해당 카테고리에 속하는지 NOC 코드를 반드시 확인하세요.</p>
        `
    },
    {
        title: "프랑스어 능력의 엄청난 혜택",
        badge: "꿀팁",
        date: "2026년 2월 22일",
        content: `
            <p>캐나다 정부는 퀘벡주 외 지역의 프랑스어 사용 인구를 늘리기 위해 프랑스어 우수자에게 파격적인 혜택을 제공합니다.</p>
            <p><strong>주요 혜택:</strong></p>
            <ul>
                <li>프랑스어 전용 선발: 일반 선발 대비 현저히 낮은 점수대 형성.</li>
                <li>추가 점수: 영어 성적과 결합 시 최대 50점의 추가 점수 획득 가능.</li>
                <li>주정부 이민 연계: 온타리오, 알버타 등 많은 주에서 프랑스어 구사자를 선호하는 별도 스트림 운영.</li>
            </ul>
            <p>영어 실력이 정체기에 있다면 TEF Canada 또는 TCF Canada 시험을 통해 프랑스어 성적을 확보하는 것이 영주권 취득의 가장 빠른 지름길이 될 수 있습니다.</p>
        `
    },
    {
        title: "온타리오 주정부(OINP) 인적 자본 우선순위 스트림 완벽 가이드",
        badge: "PNP",
        date: "2026년 2월 20일",
        content: `
            <p>온타리오주(OINP)의 Human Capital Priorities 스트림은 잡오퍼 없이도 영주권을 받을 수 있는 가장 대표적인 주정부 이민 경로입니다.</p>
            <p><strong>신청 프로세스:</strong></p>
            <ol>
                <li>익스프레스 엔트리 풀에 프로필 등록.</li>
                <li>온타리오주에서 요구하는 직종 및 점수대(보통 450~490점 사이) 충족 시 의향서(NOI) 발송.</li>
                <li>45일 이내에 주정부 승인 신청 완료.</li>
                <li>최종 승인 시 익스프레스 엔트리 점수 600점 가산.</li>
            </ol>
            <p>주로 IT(Tech Draw)와 보건 의료 분야에서 빈번하게 선발이 이루어지므로 해당 분야 종사자들은 온타리오주 NOI를 수시로 체크해야 합니다.</p>
        `
    },
    {
        title: "2026년 정착 자금 증명: 업데이트된 요구 사항",
        badge: "필수 요건",
        date: "2026년 2월 18일",
        content: `
            <p>정착 자금(Proof of Funds)은 영주권 신청 시 가족 수에 따라 반드시 증명해야 하는 필수 요건입니다.</p>
            <p><strong>2026년 기준 (추정치):</strong></p>
            <ul>
                <li>1인 가구: 약 $14,000</li>
                <li>2인 가구: 약 $17,500</li>
                <li>3인 가구: 약 $21,500</li>
                <li>4인 가구: 약 $26,000</li>
            </ul>
            <p>자금은 즉시 현금화가 가능해야 하며, 대출금은 인정되지 않습니다. 은행 잔고 증명서와 6개월간의 거래 내역을 통해 자금의 출처를 투명하게 입증해야 합니다. 단, CEC 신청자나 유효한 잡오퍼가 있는 경우 이 단계는 생략 가능합니다.</p>
        `
    },
    {
        title: "잡오퍼 없이 CRS 점수를 올리는 방법",
        badge: "전략",
        date: "2026년 2월 15일",
        content: `
            <p>캐나다 내에서 잡오퍼를 받기 어려운 상황에서도 점수를 높일 수 있는 전략은 많습니다.</p>
            <ul>
                <li><strong>학력 업그레이드:</strong> 학사 후 1년 이상의 추가 학위(Post-grad)를 취득하면 '두 개 이상의 학위'로 인정받아 점수가 오릅니다.</li>
                <li><strong>배우자 가산점:</strong> 배우자의 영어 성적(CLB 5 이상)과 학력 증명만으로도 최대 20점 정도를 추가할 수 있습니다.</li>
                <li><strong>해외 경력 최대화:</strong> 3년 이상의 숙련직 해외 경력은 1~2년일 때보다 높은 추가 점수를 제공합니다.</li>
            </ul>
            <p>작은 점수 차이가 ITA 수령 여부를 결정하므로, 사소한 항목이라도 놓치지 않고 점수를 챙기는 것이 중요합니다.</p>
        `
    },
    {
        title: "알버타 주정부(AAIP) 테크 패스웨이",
        badge: "PNP",
        date: "2026년 2월 12일",
        content: `
            <p>알버타주의 Accelerated Tech Pathway는 캐나다 내에서도 가장 빠르고 유연한 이민 스트림 중 하나로 꼽힙니다.</p>
            <p><strong>주요 특징:</strong></p>
            <ul>
                <li>빠른 처리 기간: 주정부 노미네이션 승인까지 수 주 내 완료.</li>
                <li>낮은 CRS 요건: 보통 300점대의 낮은 점수로도 ITA 수령 가능.</li>
                <li>대상: 소프트웨어 엔지니어, 데이터 분석가, 사이버 보안 전문가 등 30여 개 기술 직종.</li>
            </ul>
            <p>가장 중요한 조건은 알버타 소재 기술 기업으로부터 받은 유효한 잡오퍼입니다. 캘거리나 에드먼튼의 유망한 테크 기업으로 취업을 성공한다면 영주권은 시간 문제나 다름없습니다.</p>
        `
    },
    {
        title: "BC 주정부(BC PNP) 테크 드로우",
        badge: "PNP",
        date: "2026년 2월 10일",
        content: `
            <p>BC PNP Tech는 밴쿠버를 중심으로 한 기술 생태계 발전을 위해 만들어진 특별 전형입니다.</p>
            <p><strong>프로그램 장점:</strong></p>
            <ul>
                <li>매주 화요일 드로우 실시로 인한 높은 예측성.</li>
                <li>최소 1년 이상의 잡오퍼만 있으면 신청 가능 (다른 스트림은 영구 고용 요구).</li>
                <li>기술 분야 종사자 전용 우선 순위 처리.</li>
            </ul>
            <p>IT 기술자뿐만 아니라 그래픽 디자이너, 방송 기술자 등 창의 산업 분야도 포함되므로 BC주 취업을 희망하는 전문가들에게 최적의 선택지입니다.</p>
        `
    },
    {
        title: "TEER 시스템 이해하기: NOC 2021 완벽 정리",
        badge: "기초 지식",
        date: "2026년 2월 8일",
        content: `
            <p>캐나다 직업 분류 시스템인 NOC가 TEER(Training, Education, Experience and Responsibilities) 시스템으로 개편되었습니다.</p>
            <ul>
                <li><strong>TEER 0:</strong> 관리직 (Management)</li>
                <li><strong>TEER 1:</strong> 학사 이상의 고도 숙련직</li>
                <li><strong>TEER 2:</strong> 전문 교육 또는 2년 이상의 수습 기간 필요 직종</li>
                <li><strong>TEER 3:</strong> 6개월~2년 미만의 교육 필요 직종</li>
            </ul>
            <p>익스프레스 엔트리에 참여하려면 본인의 직종이 TEER 0, 1, 2, 3 중 하나에 해당해야 합니다. 5자리로 변경된 새로운 NOC 코드를 사용하여 본인의 업무 범위가 해당 카테고리에 정확히 부합하는지 확인하는 것이 첫 단추입니다.</p>
        `
    },
    {
        title: "유학 후 이민: 졸업 후 취업 비자(PGWP) 활용하기",
        badge: "학생",
        date: "2026년 2월 5일",
        content: `
            <p>캐나다에서 공부하는 가장 큰 이유 중 하나는 졸업 후 합법적으로 일할 수 있는 PGWP 때문입니다.</p>
            <p><strong>성공 전략:</strong></p>
            <ul>
                <li>학업 기간: 8개월 이상은 학업 기간만큼, 2년 이상은 최대 3년의 비자 수령.</li>
                <li>경력 쌓기: 비자 기간 내에 TEER 0, 1, 2, 3 직종에서 최소 1년의 경력을 쌓아야 CEC 자격 획득.</li>
                <li>지역 선정: 영주권 점수가 부족할 경우 PNP 연계가 쉬운 외곽 지역 대학 선택 고려.</li>
            </ul>
            <p>최근 PGWP 요건이 강화되고 있으므로 입학 전 본인의 프로그램이 PGWP 신청이 가능한 DLI에 속하는지 반드시 확인해야 합니다.</p>
        `
    },
    {
        title: "익스프레스 엔트리 거절을 부르는 흔한 실수들",
        badge: "주의사항",
        date: "2026년 2월 1일",
        content: `
            <p>초청장(ITA)을 받았다고 해서 영주권이 보장되는 것은 아닙니다. 서류 심사 단계에서 사소한 실수로 거절되는 경우가 많습니다.</p>
            <ul>
                <li><strong>범죄 경력 증명서:</strong> 거주했던 모든 국가의 증명서를 제출해야 하며, 유효 기간이 지난 경우 즉시 거절 사유가 됩니다.</li>
                <li><strong>경력 증명서 (Reference Letter):</strong> 단순히 명함이나 계약서만으로는 부족합니다. IRCC가 요구하는 필수 항목(시급, 주당 근무 시간, 주요 업무 내용 등)이 모두 포함되어야 합니다.</li>
                <li><strong>나이 점수 변화:</strong> ITA 수령 후 서류 제출 전 생일이 지나 점수가 깎일 경우 커트라인 아래로 내려가면 거절될 수 있습니다. (나이 잠금 규정 확인 필요)</li>
            </ul>
            <p>서류 제출 전 모든 정보를 3차 확인하는 꼼꼼함이 필요합니다.</p>
        `
    }
];

function calculateCRS() {
    let age = parseInt(document.getElementById("age").value) || 0;
    let education = parseInt(document.getElementById("education").value);
    let language = parseInt(document.getElementById("language").value);
    let canadianExp = parseInt(document.getElementById("canadianExp").value);

    let agePoints = 0;
    if(age >= 20 && age <= 29) agePoints = 110;
    else if(age >= 30 && age <= 35) agePoints = 90;
    else if(age >= 36 && age <= 40) agePoints = 70;
    else if(age > 40) agePoints = 40;

    let total = agePoints + education + language + canadianExp;
    document.getElementById("crsResult").innerText = "총점: " + total + "점";
}

function openArticle(index) {
    const article = articlesData[index];
    const modal = document.getElementById("articleModal");
    const modalBody = document.getElementById("modalBody");

    modalBody.innerHTML = `
        <span class="article-badge">${article.badge}</span>
        <h2>${article.title}</h2>
        <div class="article-meta">${article.date}</div>
        <div class="full-content">
            ${article.content}
        </div>
        <button class="read-more-btn" style="margin-top:30px; width:100%" onclick="closeArticle()">닫기</button>
    `;

    modal.style.display = "block";
    document.body.style.overflow = "hidden"; // Prevent scrolling
}

function closeArticle() {
    const modal = document.getElementById("articleModal");
    modal.style.display = "none";
    document.body.style.overflow = "auto";
}

// Close modal when clicking outside
window.onclick = function(event) {
    const modal = document.getElementById("articleModal");
    if (event.target == modal) {
        closeArticle();
    }
}

function addPost() {
    let title = document.getElementById("title").value;
    let content = document.getElementById("content").value;

    if(title === "" || content === "") return;

    let blogList = document.getElementById("blogList");
    let post = document.createElement("div");
    post.className = "blog-post";
    post.innerHTML = "<h3>" + title + "</h3><p>" + content + "</p>";
    blogList.prepend(post);

    saveToLocalStorage(title, content);

    document.getElementById("title").value = "";
    document.getElementById("content").value = "";
}

function saveToLocalStorage(title, content) {
    let posts = JSON.parse(localStorage.getItem("posts")) || [];
    posts.push({title, content});
    localStorage.setItem("posts", JSON.stringify(posts));
}

function loadPosts() {
    let posts = JSON.parse(localStorage.getItem("posts")) || [];
    let blogList = document.getElementById("blogList");
    posts.reverse().forEach(post => {
        let div = document.createElement("div");
        div.className = "blog-post";
        div.innerHTML = "<h3>" + post.title + "</h3><p>" + post.content + "</p>";
        blogList.appendChild(div);
    });
}

// 테마 토글 로직
const themeToggle = document.getElementById('themeToggle');
const currentTheme = localStorage.getItem('theme');

if (currentTheme) {
    document.documentElement.setAttribute('data-theme', currentTheme);
    if (currentTheme === 'dark') {
        themeToggle.textContent = '☀️ 라이트 모드';
    }
}

themeToggle.addEventListener('click', () => {
    let theme = document.documentElement.getAttribute('data-theme');
    if (theme === 'dark') {
        document.documentElement.setAttribute('data-theme', 'light');
        localStorage.setItem('theme', 'light');
        themeToggle.textContent = '🌙 다크 모드';
    } else {
        document.documentElement.setAttribute('data-theme', 'dark');
        localStorage.setItem('theme', 'dark');
        themeToggle.textContent = '☀️ 라이트 모드';
    }
});

loadPosts();
